{"remainingRequest":"F:\\MySpace\\VoucherProject\\client\\node_modules\\babel-loader\\lib\\index.js!F:\\MySpace\\VoucherProject\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\MySpace\\VoucherProject\\client\\src\\store\\auth.js","dependencies":[{"path":"F:\\MySpace\\VoucherProject\\client\\src\\store\\auth.js","mtime":1606331626046},{"path":"F:\\MySpace\\VoucherProject\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\MySpace\\VoucherProject\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\MySpace\\VoucherProject\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjovTXlTcGFjZS9Wb3VjaGVyUHJvamVjdC9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgdG9rZW46IG51bGwsCiAgICB1c2VyOiBudWxsCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBhdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBhdXRoZW50aWNhdGVkKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbiAmJiBzdGF0ZS51c2VyOwogICAgfSwKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9VU0VSOiBmdW5jdGlvbiBTRVRfVVNFUihzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS51c2VyID0gZGF0YTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHNpZ25JbjogZnVuY3Rpb24gc2lnbkluKF9yZWYsIGNyZWRlbnRpYWxzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCJhdXRoL3NpZ25pbiIsIGNyZWRlbnRpYWxzKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZGlzcGF0Y2goImF0dGVtcHQiLCByZXNwb25zZS5kYXRhLnRva2VuKSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhdHRlbXB0OiBmdW5jdGlvbiBhdHRlbXB0KF9yZWYyLCB0b2tlbikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY29tbWl0LCBzdGF0ZSwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKCiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCB0b2tlbik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHN0YXRlLnRva2VuKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCdhdXRoL3VzZXInKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oNCk7CiAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIG51bGwpOwogICAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVVNFUicsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzQsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaWduT3V0OiBmdW5jdGlvbiBzaWduT3V0KF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIHJldHVybiBheGlvcy5wb3N0KCdhdXRoL3NpZ25vdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIG51bGwpOwogICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCBudWxsKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["F:/MySpace/VoucherProject/client/src/store/auth.js"],"names":["axios","namespaced","state","token","user","getters","authenticated","mutations","SET_TOKEN","SET_USER","data","actions","signIn","credentials","dispatch","post","response","attempt","commit","get","signOut","then"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAGbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,IADF;AAELC,IAAAA,IAAI,EAAE;AAFD,GAHM;AAQbC,EAAAA,OAAO,EAAE;AACPC,IAAAA,aADO,yBACOJ,KADP,EACc;AACnB,aAAOA,KAAK,CAACC,KAAN,IAAeD,KAAK,CAACE,IAA5B;AACD,KAHM;AAIPA,IAAAA,IAJO,gBAIFF,KAJE,EAIK;AACV,aAAOA,KAAK,CAACE,IAAb;AACD;AANM,GARI;AAiBbG,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCN,KADD,EACQC,KADR,EACe;AACtBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,KAHQ;AAITM,IAAAA,QAJS,oBAIAP,KAJA,EAIOQ,IAJP,EAIa;AACpBR,MAAAA,KAAK,CAACE,IAAN,GAAaM,IAAb;AACD;AANQ,GAjBE;AA0BbC,EAAAA,OAAO,EAAE;AACDC,IAAAA,MADC,wBACoBC,WADpB,EACiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzBC,gBAAAA,QAAyB,QAAzBA,QAAyB;AAAA;AAAA,uBACjBd,KAAK,CAACe,IAAN,CAAW,aAAX,EAA0BF,WAA1B,CADiB;;AAAA;AAClCG,gBAAAA,QADkC;AAAA,iDAG/BF,QAAQ,CAAC,SAAD,EAAYE,QAAQ,CAACN,IAAT,CAAcP,KAA1B,CAHuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIvC,KALM;AAMDc,IAAAA,OANC,0BAM0Bd,KAN1B,EAMiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxBe,gBAAAA,MAAwB,SAAxBA,MAAwB,EAAhBhB,KAAgB,SAAhBA,KAAgB;;AACpC,oBAAIC,KAAJ,EAAW;AACPe,kBAAAA,MAAM,CAAC,WAAD,EAAcf,KAAd,CAAN;AACH;;AAHmC,oBAKhCD,KAAK,CAACC,KAL0B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,uBAUXH,KAAK,CAACmB,GAAN,CAAU,WAAV,CAVW;;AAAA;AAU5BH,gBAAAA,QAV4B;AAWhCE,gBAAAA,MAAM,CAAC,UAAD,EAAaF,QAAQ,CAACN,IAAtB,CAAN;AAXgC;AAAA;;AAAA;AAAA;AAAA;AAahCQ,gBAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACAA,gBAAAA,MAAM,CAAC,UAAD,EAAa,IAAb,CAAN;;AAdgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBvC,KAtBM;AAuBPE,IAAAA,OAvBO,0BAuBU;AAAA,UAARF,MAAQ,SAARA,MAAQ;AACb,aAAOlB,KAAK,CAACe,IAAN,CAAW,cAAX,EAA2BM,IAA3B,CAAgC,YAAM;AACzCH,QAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACAA,QAAAA,MAAM,CAAC,UAAD,EAAa,IAAb,CAAN;AACH,OAHM,CAAP;AAIH;AA5BM;AA1BI,CAAf","sourcesContent":["import axios from \"axios\";\r\n\r\nexport default {\r\n  namespaced: true,\r\n\r\n  state: {\r\n    token: null,\r\n    user: null,\r\n  },\r\n\r\n  getters: {\r\n    authenticated(state) {\r\n      return state.token && state.user;\r\n    },\r\n    user(state) {\r\n      return state.user;\r\n    },\r\n  },\r\n\r\n  mutations: {\r\n    SET_TOKEN(state, token) {\r\n      state.token = token;\r\n    },\r\n    SET_USER(state, data) {\r\n      state.user = data;\r\n    },\r\n  },\r\n\r\n  actions: {\r\n    async signIn({ dispatch }, credentials) {\r\n      let response = await axios.post(\"auth/signin\", credentials);\r\n\r\n      return dispatch(\"attempt\", response.data.token);\r\n    },\r\n    async attempt({ commit, state }, token) {\r\n        if (token) {\r\n            commit('SET_TOKEN', token);\r\n        }\r\n\r\n        if(!state.token){\r\n            return;\r\n        }\r\n\r\n        try {\r\n            let response = await axios.get('auth/user');\r\n            commit('SET_USER', response.data)\r\n        } catch (e) {\r\n            commit('SET_TOKEN', null);\r\n            commit('SET_USER', null);\r\n        }\r\n    },\r\n    signOut({commit}){\r\n        return axios.post('auth/signout').then(() => {\r\n            commit('SET_TOKEN', null);\r\n            commit('SET_USER', null);\r\n        })\r\n    }\r\n  },\r\n};"]}]}